<!-- 
    // 1. Tạo một REST api server sử dụng json-server
// 2. Đọc documentation của json-server và axios, tìm hiểu các method GET, POST, PUT, PATCH, DELETE
// 3. Làm các ví dụ sử dụng axios để gửi các request lên json-server để tạo object mới,
 update 1 object với dữ liệu mới, xoá 1 object
// Lưu ý: đây là một bài khó nếu bạn là beginner, tuy nhiên, 
khi hiểu được bài này bạn sẽ có thể lên 1 level mới (beginner cao cấp).
// Hãy dành 1 ngày để đọc, tìm hiểu, thử. 
Sau 1 ngày nếu bạn không làm được thì có thể hỏi trên Coders.Tokyo Slack hoặc JsLand.
 -->
 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>BT02</title>
 </head>
 <body>
    <input type="text" id="new-item">

    <button id="add-item">Add</button> 
    <ul id="todo-list">

    </ul>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
         let url = "http://localhost:3000/users/";
         // get user
        axios.get(url).then(function (res ){
            let items = res.data;
            // console.log("Data loaded...", items );
            render(items);
        });
        let oldObj = {
          	name: "Doan",
          	location: "HD, VN"
        };
        // post: creat new a user
        axios.post(url, oldObj)
        	.then(function(res) {	
                // console.log(res.data);
                render(res.data)
        	})
        	.catch(function(err) {
                console.log('error');
                
        	});
        let input = document.getElementById('new-item');

        let btn = document.getElementById('add-item');
        btn.addEventListener('click', addItem);
        function addItem() {
        let newItem = input.value;
        posts.push(newItem);
        render();
        newItem = '';
        }

        function render(items){
        let htmlList = document.getElementById('todo-list');
        let content = items.map((item) => {

            return `<li> name: ${item.name}<br/> location: ${item.location}
                    </li>`;
        })
        htmlList.innerHTML = content.join('');
        }
        // render();
    </script>
    </script>
 </body>
 </html>